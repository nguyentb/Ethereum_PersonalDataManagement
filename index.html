<!DOCTYPE html>

<html>

  <head>
    <title>Ethereum-based Personal Data Management</title>
    <link rel="stylesheet" type="text/css" href="styles/main.css">
    <link rel="icon" type="image/png" href="assets/logo.png" />
    <script type="text/javascript" src="ipfs/index.js"></script>
    <script type="text/javascript" src="javascript/crypto.js"></script>
    <style>
    * {box-sizing: border-box;}.column {float: left; width: 50%; padding: 10px;}
    .row:after {content: ""; display: table; clear: both;}
    </style>
  </head>

  <body>
    <header>
      <img width=700 type="image/png" src="assets/full-logo.png" alt="PDMPB"/>
    </header>
    <main>
    <div class="box">
      <h2>Your connection</h2>
      <div>
        <h3>
          ETH Address: <span style="font-weight:normal" id="address">Log in to MetaMask to show your address</span><br>
          Contract Address: <span style="font-weight:normal" id="contAdd"></span><br>
          IPFS Node ID: <span style="font-weight:normal" id="nodeId"></span>
        </h3>
      </div>
    </div>
    <div class="box">
      <h2>Add personal data</h2>

      <div class="col-container">
        <div id="usr" class="box col">

          <h3>USER</h3>
          <form id="useradd_form">
            Select a file:<br>
            <input type="file" id="useradd_file"><br>
          </form>
          <button type="button" id="useraddbutton">Add</button>

        </div>

        <div id="sp" class="box col">
          <h3>SERVICE PROVIDER</h3>
          <form id="spadd_form">
            User ETH address:<br>
            <input type="text" id="user_eth_address"><br>
            Select a file:<br>
            <input type="file" id="spadd_file"><br>
          </form>
          <button type="button" id="spadduserdatabutton">Add</button>

        </div>
      </div>

    </div>

    <div class="box row">
      <h2>Your personal data</h2>
      <table>
            <thead>
              <tr>
                <th>File ID</th>
              </tr>
            </thead>
            <tbody id="myDataloc">
              <tr id="empty-row">
                <td colspan="4">You don't have any data.</td>
              </tr>
            </tbody>
          </table>
    </div>

    <div class="box">
      <h2>Access Control</h2>

      <div class="col-container">
        <div id="grant" class="box col">

          <h3>GRANT ACCESS</h3>
          <form id="grant_form">
            File ID:<br>
            <input type="text" id="grant_cid"><br>
            ETH address:<br>
            <input type="text" id="grant_eth"><br>
            Permission type:<br>
            <select id="grant_policy">
              <option value="0">Create</option>
              <option value="1">Read</option>
              <option value="2">Update</option>
              <option value="3">Delete</option>
            </select><br>
          </form>
          <button type="button" id="grant_button">OK</button>

        </div>

        <div id="revoke" class="box col">
          <h3>REVOKE ACCESS</h3>
          <form id="revoke_form">
            File ID:<br>
            <input type="text" id="revoke_cid"><br>
            ETH address:<br>
            <input type="text" id="revoke_eth"><br>
            Permission type:<br>
            <select id="revoke_policy">
              <option value="0">Create</option>
              <option value="1">Read</option>
              <option value="2">Update</option>
              <option value="3">Delete</option>
            </select><br>
          </form>
          <button type="button" id="revoke_button">OK</button>

        </div>
      </div>

    </div>

    <div class="box row">
      <h2>Request a token</h2>
      Enter a file ID:
      <div class="col-container">
        <form id="token_form">
        <input type="text" id="user_getdata" style="width:100%;"><br>
        Permission type:<br>
        <select id="token_policy">
          <option value="0">Create</option>
          <option value="1">Read</option>
          <option value="2">Update</option>
          <option value="3">Delete</option>
        </select><br>
        <button type="button" id="getdata_button" style="width: 100%">Get</button>
        </form>
      </div>
      <table>
            <thead>
              <tr>
                <th>Token</th>
              </tr>
            </thead>
            <tbody id="myTokenLoc">
              <tr id="empty-row-token">
                <td colspan="4">Enter a file ID to request a token.</td>
              </tr>
            </tbody>
          </table>
    </div>

    <div class="box row">
      <h2>Use token</h2>
      <form id="redeem_form">
        File ID:<br>
        <input type="text" id="redeem_fileID" style="width: 100%"><br>
        Token:<br>
        <input type="text" id="redeem_token" style="width: 100%"><br>
      </form>
      <button type="button" id="redeem_button">Get Data</button>

      <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>File ID</th>
                <th>Size</th>
              </tr>
            </thead>
            <tbody id="getDataloc">
              <tr id="empty-row-get">
                <td colspan="4" id="error-loc-get">Use a token to download the files.</td>
              </tr>
            </tbody>
          </table>
    </div>

  </main>
  </body>

  <script type="text/javascript" src="./javascript/setUp.js"></script>
  <script type="text/javascript" src="./javascript/addData.js"></script>
  <script type="text/javascript" src="./javascript/accessControl.js"></script>
  <script type="text/javascript" src="./javascript/getData.js"></script>

</html>

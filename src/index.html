<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Election Results</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>  
    <div class="container" style="width: 650px;">
      <div class="row">      
        <h2 class="text-center">Your Account Address:</h2>
        <hr/>    
      	<h3 id="accountAddress" class="text-center"></h3>
        <hr/>
        
      	<div>
      	<h2 class="text-center">Your Dataset information:</h2>
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Flag</th>
                  <th scope="col">Data Pointer</th>
                  <th scope="col">Data Hash</th>
                </tr>
              </thead>
              <tbody id="datainfo"></tbody>
            </table>
            <hr/>
        </div>
        
        <div id="uploadinfo" class="form-group" style="width: 650px;">
			<form onSubmit="App.uploadData(); return false;">
			  <div class="data-info">
				  <table class="table">
				  <thead>
				    <tr>
				      <th scope="col">#</th>
				      <th scope="col">Data Pointer</th>
				      <th scope="col"><input type="text" id="dpointer"></th>
				    </tr>
				    <tr>
				      <th scope="col">#</th>
				      <th scope="col">Data Hash</th>              
				      <th scope="col"><input type="text" id="dhash"></th>              
				    </tr>
				  </thead>
				  </table>
			  </div>
			  <button type="submit" class="btn btn-primary">Upload Data</button>
			  <hr />
			</form>
			
			<!--Upload Form-->
			<form>
			  <table>
				<tr>
				  <td colspan="2">File Upload</td>
				</tr>
				<tr>
				  <th>Select File </th>
				  <td><input id="csv" name="csv" type="file" /></td>
				</tr>
				<tr>
				  <td colspan="2">
					<input type="submit" value="submit"/> 
				  </td>
				</tr>
			  </table>
			</form>
			
	    </div>

      	<div id="aclist" class="form-group" style="width: 650px;">
      		<h2 class="text-center">Access Control List</h2>
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Third-party </th>
                  <th scope="col">Permissions </th>
                  <th scope="col">Token Info. </th>
                </tr>
              </thead>
              <tbody id="aclinfo"></tbody>
            </table>
            <hr/>
        </div>
        
      	<div id="grantaccess" class="form-group" style="width: 650px;">
			<form onSubmit="App.grantAccess(); return false;">
			  <div class="data-info">
				  <table class="table">
				  <thead>
				    <tr>
				      <th scope="col">#</th>
				      <th scope="col">Third-Party Address</th>
				      <th scope="col"><input type="text" id="tpaddress"></th>
				    </tr>
				    <tr>
				      <th scope="col">#</th>
				      <th scope="col">Permissions</th>				      
				      <th scope="col">
				      	  <select class="form-control" id="permissionSelect" multiple>
						  	<option value=1>Create</option>
						  	<option value=2>Read</option>
						  	<option value=4>Update</option>
 						  	<option value=8>Delete</option>
						  </select>			      
				      </th>
				    </tr>
				  </thead>
				  </table>
			  </div>
			  <button type="submit" class="btn btn-primary">Grant Access</button>
			  <hr />
			</form>
	    </div>    
      </div>
      
	  <div>
		<form onSubmit="App.tokenInfo(); return false;">
		  <div>
			  <table class="table">
			  <thead>
				<tr>
				  <th scope="col">#</th>
				  <th scope="col">Token:</th>              
				  <th scope="col"><input type="text" id="actoken"></th>
				  <th scope="col"><button type="submit" class="btn btn-primary">Get Info</button></th>
				</tr>
			  </thead>
			  </table>
			  
			  <table class="table">
			      <thead>
			        <tr>
			          <th scope="col">Third-party ID</th>
			          <th scope="col">Requested Permissions</th>
			          <th scope="col">Issued at</th>
			          <th scope="col">Expire in</th>
			          <th scope="col">Refresh Count</th>
			          <th scope="col">Validity</th>				          
			        </tr>
			      </thead>
			      <tbody id="tokenInfo"></tbody>
	        </table>			  
		  </div>
		  <hr />
		</form>
	  </div>
            
    </div>
    
     <script>
	   //form Submit
	   $("form").submit(function(evt){	 
		  evt.preventDefault();
		  var formData = new FormData($(this)[0]);
	   $.ajax({
		   url: 'fileUpload',
		   type: 'POST',
		   data: formData,
		   async: false,
		   cache: false,
		   contentType: false,
		   enctype: 'multipart/form-data',
		   processData: false,
		   success: function (response) {
		     alert(response);
		   }
	   });
	   return false;
	 });
	</script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/web3.min.js"></script>
    <script src="js/truffle-contract.js"></script>
    <script src="js/app.js"></script>
    <script src="js/utils.js"></script>
  </body>
</html>
